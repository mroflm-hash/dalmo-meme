<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DALMO ‚Äî Seed ‚Ä¢ Private ‚Ä¢ Public Sale (ETH or USDT on Ethereum)</title>
  <meta name="description" content="DALMO ‚Äî the Dalmatian Astro‚ÄëDog meme coin. Buy with ETH or USDT (ERC20) on Ethereum. Seed: 5‚Äì15 Sep 2025 ‚Ä¢ Private: 15‚Äì25 Sep 2025 ‚Ä¢ Public: 25 Sep‚Äì5 Oct 2025.">
  <link rel="icon" type="image/png" href="logo.png"><text y='50%' x='50%' dominant-baseline='middle' text-anchor='middle' font-size='48'>üê∂</text></svg>">
  <style>
    :root{
      --bg: #0b0b11; --card:#151521; --muted:#aab0c0; --text:#fff; --accent1:#6d6ef6; --accent2:#ec4899; --accent3:#22d3ee; --ok:#10b981; --warn:#f59e0b; --err:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Ubuntu,Arial,sans-serif; color:var(--text);
      background:
        radial-gradient(60% 80% at 50% 0%, rgba(109,110,246,0.25), transparent 70%),
        radial-gradient(40% 60% at 80% 10%, rgba(236,72,153,0.2), transparent 70%),
        var(--bg);
    }
    a{color:#c7c9ff}
    .wrap{max-width:1200px;margin:0 auto;padding:24px}
    .nav{position:sticky;top:0;backdrop-filter:saturate(140%) blur(8px);background:linear-gradient(90deg,rgba(13,13,22,.65),rgba(20,20,32,.45));border-bottom:1px solid rgba(255,255,255,.08);z-index:50}
    .navin{height:64px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:12px;align-items:center;font-weight:800;letter-spacing:.2px}
    .logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,rgba(255,255,255,.15),rgba(255,255,255,.04));display:grid;place-items:center;box-shadow:0 6px 18px rgba(0,0,0,.35);} 
    .logoimg{width:100%;height:100%;border-radius:12px;object-fit:cover;display:block}
    .navtabs{display:flex;gap:10px;align-items:center}
    .tabbtn{font-size:14px;border:1px solid rgba(255,255,255,.15);padding:8px 12px;border-radius:12px;background:rgba(255,255,255,.06);cursor:pointer}
    .tabbtn.active{background:#fff;color:#000;border-color:transparent}

    .row{display:grid;grid-template-columns:1fr;gap:22px}
    @media(min-width:1000px){.row{grid-template-columns:1.2fr .8fr}}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:22px;box-shadow:0 8px 30px rgba(0,0,0,.35)}
    h1{font-size:48px;margin:0 0 8px;line-height:1.05}
    h2{font-size:28px;margin:0 0 8px}
    .muted{color:var(--muted)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;background:#fff;color:#000;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .btn.sec{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.2)}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    label{font-size:14px}
    input,select,textarea{width:100%;padding:12px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.05);color:#fff;outline:none}

    .kpis{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:14px}
    .kpi{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;min-width:0}
    .kpi .title{color:var(--muted);font-size:13px;margin-bottom:4px}
    .stat{font-weight:800;font-size:clamp(18px,2.2vw,28px);line-height:1;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    .progress{height:12px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden}
    .bar{height:100%;background:linear-gradient(90deg,var(--accent1),var(--accent2),var(--accent3));width:0%}
    .badge{display:inline-block;font-size:12px;padding:4px 10px;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15)}
    .hidden{display:none}
    footer{border-top:1px solid rgba(255,255,255,.08);margin-top:30px;padding:24px 0;text-align:center;color:var(--muted)}
    .grad{background:linear-gradient(90deg,var(--accent1),var(--accent2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .warn{font-size:12px;color:#ffb8b8}

    /* Meme Gallery */
    .mgrid{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:900px){.mgrid{grid-template-columns:1fr 1fr 1fr}}
    .meme{position:relative;border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,.1);background:#0e0e16;min-height:220px;display:flex;align-items:center;justify-content:center}
    .meme .cap{position:absolute;bottom:10px;left:10px;right:10px;padding:10px 12px;border-radius:10px;background:rgba(0,0,0,.45);backdrop-filter:blur(2px);font-weight:800;letter-spacing:.2px}

    /* Tabs */
    .tab{display:none}
    .tab.active{display:block}

    /* Connect Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:60}
    .modal.show{display:flex}
    .modal .inner{width:min(520px,92vw);background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.15);border-radius:18px;padding:18px}
    .wallets{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .wbtn{display:flex;align-items:center;gap:10px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);border-radius:12px;padding:10px;cursor:pointer}
    .wbtn:hover{background:rgba(255,255,255,.12)}
    .wicon{width:28px;height:28px;border-radius:8px;background:#111;display:grid;place-items:center}
    .note{font-size:12px;color:var(--muted)}

    /* Inline SVG logo tweaks */
    .logotext{font-weight:900;letter-spacing:.5px}
  </style>
</head>
<body>
  <!-- Connect Modal -->
  <div id="connectModal" class="modal">
    <div class="inner">
      <h3 style="margin:0 0 6px">Connect a wallet</h3>
      <div class="note">Pick a wallet to connect on <strong>Ethereum</strong>. If you don't see yours, use the default button or install one.</div>
      <div id="walletList" class="wallets"></div>
      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <button id="connectDefault" class="btn">Default Wallet</button>
        <a class="btn sec" href="https://metamask.io/download/" target="_blank" rel="noreferrer">Get MetaMask</a>
        <a class="btn sec" href="https://phantom.app/download" target="_blank" rel="noreferrer">Get Phantom</a>
        <a class="btn sec" href="https://www.exodus.com/download" target="_blank" rel="noreferrer">Get Exodus</a>
        <button id="closeModal" class="btn sec" style="margin-left:auto">Close</button>
      </div>
    </div>
  </div>

  <div class="nav">
    <div class="wrap navin">
      <div class="brand">
        <div class="logo"><img src="logo.png" alt="DALMO logo" class="logoimg"></div>
        <span class="logotext">DALMO</span>
        <span class="badge">Spots on the Moon</span>
      </div>
      <div class="navtabs">
        <button class="tabbtn active" data-tab="home">Home</button>
        <button class="tabbtn" data-tab="buy">Buy</button>
        <button class="tabbtn" data-tab="whitepaper">Whitepaper</button>
        <button class="tabbtn" data-tab="about">About</button>
        <button class="tabbtn" data-tab="socials">Socials</button>
        <button id="connectBtn" class="btn">Connect Wallet</button>
      </div>
    </div>
  </div>

  <div class="wrap">
    <!-- HOME TAB -->
    <section id="tab-home" class="tab active">
      <div class="row">
        <section class="card">
          <h1>DALMO ‚Äî <span class="grad">Dalmatian Astro‚ÄëDog</span></h1>
          <p class="muted">Buy the sale with <strong>ETH</strong> or <strong>USDT (ERC20)</strong> on <strong>Ethereum</strong>.</p>
          <div class="kpis" style="margin:18px 0">
            <div class="kpi"><div class="title">Current Phase</div><span class="stat" id="phaseName">‚Äî</span></div>
            <div class="kpi"><div class="title">Phase Price</div><span class="stat" id="phasePrice">‚Äî</span></div>
            <div class="kpi"><div class="title">Phase Supply</div><span class="stat" id="phaseSupply">‚Äî</span></div>
            <div class="kpi"><div class="title">Progress</div><span class="stat" id="progressStat">0%</span></div>
          </div>
          <div class="progress"><div id="progressBar" class="bar"></div></div>
          <p class="muted" id="saleStatus" style="margin-top:10px">Loading phase‚Ä¶</p>

          <div class="mgrid" style="margin-top:18px">
            <!-- Six inline SVG "photos"/memes -->
            <div class="meme">"+
            "<svg viewBox='0 0 600 320' width='100%' height='100%'>"+
            "<defs><linearGradient id='sky1' x1='0' x2='1'><stop offset='0' stop-color='#15172b'/><stop offset='1' stop-color='#1d0f2a'/></linearGradient></defs>"+
            "<rect width='600' height='320' fill='url(#sky1)'/>"+
            "<circle cx='520' cy='70' r='50' fill='#ffe08a'/>"+
            "<g transform='translate(90,140)'>"+
            "<ellipse cx='0' cy='60' rx='120' ry='18' fill='rgba(0,0,0,.35)'/>"+
            "<rect x='-30' y='-40' width='200' height='80' rx='40' fill='#fff'/>"+
            "<circle cx='-10' cy='-5' r='8' fill='#000'/><circle cx='20' cy='-5' r='8' fill='#000'/>"+
            "<rect x='100' y='-20' width='40' height='20' rx='6' fill='#111'/>"+
            "<circle cx='-5' cy='-15' r='6' fill='#000'/><circle cx='30' cy='-20' r='6' fill='#000'/>"+
            "</g>"+
            "<g transform='translate(380,160) rotate(-30)'>"+
            "<rect x='0' y='-20' width='140' height='40' rx='20' fill='#f1f5ff'/>"+
            "<polygon points='140,-10 170,0 140,10' fill='#f1f5ff'/>"+
            "<text x='20' y='8' fill='#111' font-size='18' font-weight='700'>MOON</text>"+
            "</g>"+
            "</svg><div class='cap'>Astro DALMO taxis to the launchpad.</div></div>

            <div class="meme">"+
            "<svg viewBox='0 0 600 320' width='100%' height='100%'>"+
            "<defs><linearGradient id='sky2' x1='0' x2='1'><stop offset='0' stop-color='#0b1020'/><stop offset='1' stop-color='#101a3a'/></linearGradient></defs>"+
            "<rect width='600' height='320' fill='url(#sky2)'/>"+
            "<g transform='translate(120,140)'>"+
            "<rect x='-40' y='-60' width='260' height='120' rx='60' fill='#fff'/>"+
            "<circle cx='-10' cy='-10' r='10' fill='#000'/><circle cx='20' cy='-12' r='8' fill='#000'/>"+
            "<rect x='120' y='-25' width='46' height='30' rx='8' fill='#111'/>"+
            "</g>"+
            "<g transform='translate(380,160) rotate(-45)'>"+
            "<rect x='-10' y='-18' width='160' height='36' rx='18' fill='#e5edff'/>"+
            "<polygon points='150,-10 190,0 150,10' fill='#e5edff'/>"+
            "</g>"+
            "<text x='30' y='40' fill='#fff' font-size='22' font-weight='700'>"WEN MOON?" ‚Äî Now.</text>"+
            "</svg><div class='cap'>Boarding the rocket.</div></div>

            <div class="meme">"+
            "<svg viewBox='0 0 600 320' width='100%' height='100%'>"+
            "<rect width='600' height='320' fill='#0d0d18'/>"+
            "<circle cx='500' cy='60' r='44' fill='#fef08a'/>"+
            "<g transform='translate(180,120)'>"+
            "<rect x='-30' y='-40' width='200' height='80' rx='40' fill='#fff'/>"+
            "<circle cx='-5' cy='-10' r='8' fill='#000'/><circle cx='25' cy='-12' r='8' fill='#000'/>"+
            "<rect x='112' y='-16' width='38' height='28' rx='8' fill='#111'/>"+
            "</g>"+
            "<g transform='translate(360,150)'>"+
            "<polygon points='0,-20 90,0 0,20' fill='#a5b4fc'/>"+
            "<rect x='-8' y='-18' width='16' height='36' fill='#f87171'/>"+
            "</g>"+
            "<text x='24' y='300' fill='#fff' font-size='18'>Fueling boosters‚Ä¶</text>"+
            "</svg><div class='cap'>Pre‚Äëlaunch checks complete.</div></div>

            <div class="meme">"+
            "<svg viewBox='0 0 600 320' width='100%' height='100%'>"+
            "<rect width='600' height='320' fill='#0a0f1f'/>"+
            "<g transform='translate(260,210) rotate(-20)'>"+
            "<polygon points='0,-40 140,0 0,40' fill='#93c5fd'/>"+
            "<rect x='-12' y='-38' width='24' height='76' fill='#fb7185'/>"+
            "</g>"+
            "<text x='20' y='40' fill='#fff' font-size='22' font-weight='700'>Ignition! üåï</text>"+
            "</svg><div class='cap'>To the Moon and beyond.</div></div>

            <div class="meme">"+
            "<svg viewBox='0 0 600 320' width='100%' height='100%'>"+
            "<rect width='600' height='320' fill='#0e0e16'/>"+
            "<circle cx='480' cy='80' r='60' fill='#fde68a'/>"+
            "<g transform='translate(120,150)'>"+
            "<rect x='-40' y='-60' width='260' height='120' rx='60' fill='#fff'/>"+
            "<circle cx='-10' cy='-12' r='10' fill='#000'/><circle cx='22' cy='-14' r='8' fill='#000'/>"+
            "<rect x='120' y='-25' width='46' height='30' rx='8' fill='#111'/>"+
            "</g>"+
            "<text x='30' y='300' fill='#fff' font-size='18'>DALMO plants the flag.</text>"+
            "</svg><div class='cap'>Landed.</div></div>

            <div class="meme">"+
            "<svg viewBox='0 0 600 320' width='100%' height='100%'>"+
            "<rect width='600' height='320' fill='#0d1022'/>"+
            "<text x='36' y='54' fill='#fff' font-size='22' font-weight='700'>ETH x USDT x DALMO</text>"+
            "<circle cx='320' cy='160' r='60' fill='#2dd4bf'/><text x='290' y='165' fill='#061' font-size='24' font-weight='900'>USDT</text>"+
            "<circle cx='470' cy='160' r='60' fill='#60a5fa'/><text x='450' y='165' fill='#041' font-size='24' font-weight='900'>ETH</text>"+
            "<g transform='translate(120,160)'>"+
            "<rect x='-40' y='-60' width='260' height='120' rx='60' fill='#fff'/>"+
            "</g>"+
            "</svg><div class='cap'>Fund the mission in ETH or USDT.</div></div>
          </div>
        </section>

        <aside class="card">
          <h2>Sale Phases</h2>
          <ul>
            <li><span class="badge">SEED SALE</span> ‚Äî <strong>$0.003</strong> ‚Äî <strong>5‚Äì15 Sep 2025</strong></li>
            <li><span class="badge">PRIVATE SALE</span> ‚Äî <strong>$0.006</strong> ‚Äî <strong>15‚Äì25 Sep 2025</strong></li>
            <li><span class="badge">PUBLIC SALE</span> ‚Äî <strong>$0.009</strong> ‚Äî <strong>25 Sep‚Äì5 Oct 2025</strong></li>
          </ul>
          <div style="margin-top:10px" class="muted">Total supply: 10,000,000,000 DALMO</div>
          <div style="margin-top:10px" class="muted">Phase buckets: Seed 1.0B ‚Ä¢ Private 0.9B ‚Ä¢ Public 0.6B</div>
          <div style="margin-top:16px">
            <div class="badge">Project wallet (ETH & USDT):</div>
            <div style="word-break:break-all;margin-top:6px"><code>0xDd9769618981c8b0Cd908ec17f32FB47f7364954</code></div>
          </div>
          <div style="margin-top:16px" class="muted" id="walletInfo">Not connected</div>
          <hr style="border-color:rgba(255,255,255,.08);margin:16px 0" />
          <div class="muted" style="font-size:12px">Supported wallets: MetaMask, Phantom (EVM), Exodus, Coinbase Wallet, and other EVM wallets.</div>
        </aside>
      </div>
    </section>

    <!-- BUY TAB (Active phase only) -->
    <section id="tab-buy" class="tab">
      <div class="row">
        <section class="card">
          <h2>Buy DALMO ‚Äî <span class="badge" id="buyPhase">‚Äî</span></h2>
          <p class="muted">Select currency, enter <strong>USD</strong>, preview tokens at the current phase price, then connect & buy.</p>
          <div class="grid2">
            <div>
              <label>Pay with</label>
              <select id="payToken">
                <option value="ETH">ETH</option>
                <option value="USDT">USDT (ERC20)</option>
              </select>
            </div>
            <div>
              <label>Amount (USD)</label>
              <input id="usdInput" type="number" min="1" step="1" placeholder="100" />
            </div>
          </div>

          <div class="grid2" style="margin-top:12px">
            <div>
              <label>You'll receive (DALMO)</label>
              <input id="tokensOut" type="text" disabled value="0" />
            </div>
            <div id="ethCalcBox">
              <label>Required ETH (auto)</label>
              <input id="ethNeeded" type="text" disabled value="0" />
              <div class="muted" style="font-size:12px">ETH/USD: <span id="ethUsd">‚Ä¶</span> <span id="ethPriceWarn" class="warn hidden">(enter manually if price fails)</span></div>
            </div>
            <div id="usdtCalcBox" class="hidden">
              <label>Required USDT</label>
              <input id="usdtNeeded" type="text" disabled value="0" />
            </div>
          </div>

          <div style="margin-top:14px">
            <button id="buyBtn" class="btn">Connect & Buy</button>
            <button id="disconnectBtn" class="btn sec" style="margin-left:8px;display:none">Disconnect</button>
            <div id="txMsg" class="muted" style="margin-top:10px"></div>
          </div>
          <p class="warn" style="margin-top:12px">This page sends your chosen asset directly to the project wallet. Token distribution is handled by the team after the sale. Always verify the address before sending.</p>
        </section>
        <aside class="card">
          <h2>Phase</h2>
          <p id="saleStatusBuy" class="muted">Loading‚Ä¶</p>
          <h2 style="margin-top:12px">Address</h2>
          <code style="word-break:break-all">0xDd9769618981c8b0Cd908ec17f32FB47f7364954</code>
        </aside>
      </div>
    </section>

    <!-- WHITEPAPER TAB -->
    <section id="tab-whitepaper" class="tab">
      <section class="card">
        <h2>DALMO ‚Äî Litepaper</h2>
        <p class="muted">Version 1.0 ‚Äî This is an abridged overview intended for the community. Nothing here is financial advice.</p>
        <h3>1. Concept</h3>
        <p>DALMO is a community‚Äëfirst meme coin inspired by the Dalmatian astro‚Äëdog ‚Äî a symbol of loyal vibes, playful culture, and orbital ambition.</p>
        <h3>2. Tokenomics (Summary)</h3>
        <ul>
          <li>Total Supply: 10,000,000,000 DALMO</li>
          <li>Seed (fixed price $0.003): 1.0B</li>
          <li>Private (fixed price $0.006): 0.9B</li>
          <li>Public (fixed price $0.009): 0.6B</li>
          <li>Liquidity: 3.0B ‚Ä¢ Treasury: 1.5B ‚Ä¢ Ecosystem: 1.5B ‚Ä¢ CEX Liquidity: 1.0B ‚Ä¢ Airdrops: 0.5B</li>
        </ul>
        <h3>3. Marketing</h3>
        <ul>
          <li><strong>Memes & Contests:</strong> Weekly meme sprints with on‚Äëchain rewards, creator spotlights, and brandable templates.</li>
          <li><strong>KOL & Spaces:</strong> Targeted Twitter/X spaces (CT), curated KOL waves, and co‚Äëmarketing with tooling partners.</li>
          <li><strong>Quests:</strong> Points system with streaks and proof‚Äëof‚Äëmeme tasks; retroactive airdrops for top contributors.</li>
          <li><strong>Transparency:</strong> Dune dashboard, public multisig, LP lock proofs, and treasury updates.</li>
        </ul>
        <h3>4. Exchange Objective</h3>
        <p>We aim for a <strong>Gate.io listing in ~4 months post‚Äëlaunch</strong>, subject to market conditions and compliance. This is a target, not a guarantee.</p>
        <h3>5. Roadmap</h3>
        <ul>
          <li><strong>Sep 5‚Äì15:</strong> Seed sale, community ignition, CG/CMC apps.</li>
          <li><strong>Sep 15‚Äì25:</strong> Private sale (whitelist), quest season 1, partnerships.</li>
          <li><strong>Sep 25‚ÄìOct 5:</strong> Public sale, liquidity expansion, IRL/meme drops.</li>
          <li><strong>+4 months:</strong> CEX outreach (incl. Gate.io), governance pilots.</li>
        </ul>
        <h3>6. Risks</h3>
        <p>Crypto assets are volatile. Regulatory and market risks may affect timelines, listings, and deliverables. DYOR.</p>
      </section>
    </section>

    <!-- ABOUT TAB -->
    <section id="tab-about" class="tab">
      <section class="card">
        <h2>About DALMO</h2>
        <p>We are a team of five crypto enthusiasts with deep experience across smart contracts, growth, community, operations, and brand design. We believe memes are culture, and culture builds durable networks.</p>
        <div class="grid2" style="margin-top:10px">
          <div class="card" style="padding:14px"><strong>Lead Dev</strong><br/><span class="muted">Solidity, audits, infra</span></div>
          <div class="card" style="padding:14px"><strong>Smart Contracts</strong><br/><span class="muted">Token, presale tooling</span></div>
          <div class="card" style="padding:14px"><strong>Growth</strong><br/><span class="muted">KOLs, partnerships, listings</span></div>
          <div class="card" style="padding:14px"><strong>Community</strong><br/><span class="muted">Events, quests, support</span></div>
          <div class="card" style="padding:14px"><strong>Ops & Design</strong><br/><span class="muted">Brand, content, logistics</span></div>
        </div>
        <p style="margin-top:10px" class="muted">We value transparency: verified contracts, LP lock proofs, and a public roadmap. Our treasury will be managed via multisig with regular updates.</p>
      </section>
    </section>

    <!-- SOCIALS TAB -->
    <section id="tab-socials" class="tab">
      <section class="card">
        <h2>Socials</h2>
        <p class="muted">Coming soon ‚Äî we‚Äôll add official links here (Twitter/X, Telegram, Discord, GitHub, Dune) once live.</p>
      </section>
    </section>

    <footer>¬© <span id="year"></span> ‚Ä¢ DALMO ‚Ä¢ DYOR</footer>
  </div>

  <!-- Ethers v5 UMD -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
  (function(){
    const ETH_CHAIN_ID_HEX = '0x1'; // Ethereum mainnet
    const RECEIVING_ADDRESS = '0xDd9769618981c8b0Cd908ec17f32FB47f7364954';
    const USDT_ADDRESS      = '0xdAC17F958D2ee523a2206206994597C13D831ec7'; // ERC20 (6 decimals)
    const USDT_DECIMALS     = 6;

    const ROUNDS = [
      { key:'seed',    name:'SEED SALE',    price:0.003, start:new Date('2025-09-05T00:00:00'), end:new Date('2025-09-15T23:59:59'), supply:1_000_000_000 },
      { key:'private', name:'PRIVATE SALE', price:0.006, start:new Date('2025-09-15T00:00:00'), end:new Date('2025-09-25T23:59:59'), supply:  900_000_000 },
      { key:'public',  name:'PUBLIC SALE',  price:0.009, start:new Date('2025-09-25T00:00:00'), end:new Date('2025-10-05T23:59:59'), supply:  600_000_000 }
    ];

    // Elements
    const connectBtn    = document.getElementById('connectBtn');
    const connectModal  = document.getElementById('connectModal');
    const walletList    = document.getElementById('walletList');
    const connectDefault= document.getElementById('connectDefault');
    const closeModalBtn = document.getElementById('closeModal');

    const buyBtn       = document.getElementById('buyBtn');
    const disconnectBtn= document.getElementById('disconnectBtn');
    const payTokenSel  = document.getElementById('payToken');
    const usdInput     = document.getElementById('usdInput');
    const tokensOut    = document.getElementById('tokensOut');
    const ethNeeded    = document.getElementById('ethNeeded');
    const usdtNeeded   = document.getElementById('usdtNeeded');
    const ethUsd       = document.getElementById('ethUsd');
    const ethPriceWarn = document.getElementById('ethPriceWarn');
    const ethCalcBox   = document.getElementById('ethCalcBox');
    const usdtCalcBox  = document.getElementById('usdtCalcBox');

    const walletInfo   = document.getElementById('walletInfo');
    const saleStatus   = document.getElementById('saleStatus');
    const saleStatusBuy= document.getElementById('saleStatusBuy');
    const progressBar  = document.getElementById('progressBar');
    const progressStat = document.getElementById('progressStat');
    const phaseNameEl  = document.getElementById('phaseName');
    const phasePriceEl = document.getElementById('phasePrice');
    const phaseSupplyEl= document.getElementById('phaseSupply');
    const buyPhaseEl   = document.getElementById('buyPhase');

    document.getElementById('year').textContent = new Date().getFullYear();

    // Tabs
    document.querySelectorAll('.tabbtn').forEach(btn=>btn.addEventListener('click',()=>{
      document.querySelectorAll('.tabbtn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const id = 'tab-'+btn.dataset.tab;
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }));

    // Provider discovery (EIP-6963)
    const announced = [];
    window.addEventListener('eip6963:announceProvider', (event)=>{
      announced.push(event.detail); // {info, provider}
    });
    window.dispatchEvent(new Event('eip6963:requestProvider'));

    function openConnectModal(){
      walletList.innerHTML = '';
      announced.forEach((d,i)=>{
        const btn = document.createElement('button');
        btn.className='wbtn';
        btn.innerHTML = `<span class="wicon">ü¶ä</span> <span>${d.info.name}</span>`;
        btn.onclick = ()=> selectProvider(d.provider);
        walletList.appendChild(btn);
      });
      connectModal.classList.add('show');
    }

    function closeConnectModal(){ connectModal.classList.remove('show'); }

    let provider = null, signer = null, userAddress = null, ethPrice = null;
    let currentRound = null;

    function selectProvider(p){
      provider = new ethers.providers.Web3Provider(p, 'any');
      connectWithProvider();
    }

    async function ensureDefaultProvider(){
      if(!window.ethereum){ throw new Error('No EVM wallet detected. Install MetaMask / Phantom / Exodus.'); }
      provider = new ethers.providers.Web3Provider(window.ethereum, 'any');
      return provider;
    }

    async function connectWithProvider(){
      try{
        if(!provider) await ensureDefaultProvider();
        await provider.send('eth_requestAccounts',[]);
        const net = await provider.getNetwork();
        if(net.chainId !== 1){
          try{ await provider.send('wallet_switchEthereumChain',[{chainId:ETH_CHAIN_ID_HEX}]); }
          catch(e){ throw new Error('Please switch to Ethereum Mainnet in your wallet.'); }
        }
        signer = provider.getSigner();
        userAddress = await signer.getAddress();
        walletInfo.textContent = 'Connected: '+short(userAddress)+' on Ethereum';
        connectBtn.textContent = 'Connected';
        if(disconnectBtn) disconnectBtn.style.display = 'inline-flex';
        closeConnectModal();
      }catch(e){ note(e.message || String(e)); }
    }

    connectBtn.addEventListener('click', ()=>{
      // If multiple providers, show modal; otherwise default
      if(announced.length>0){ openConnectModal(); } else { connectWithProvider(); }
    });
    connectDefault.addEventListener('click', connectWithProvider);
    closeModalBtn.addEventListener('click', closeConnectModal);

    async function disconnectWallet(){
      provider = null; signer = null; userAddress = null;
      walletInfo.textContent = 'Not connected';
      connectBtn.textContent = 'Connect Wallet';
      if(disconnectBtn) disconnectBtn.style.display = 'none';
    }
    if(disconnectBtn) disconnectBtn.addEventListener('click', disconnectWallet);

    // ETH price
    async function fetchEthPrice(){
      try{
        const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd',{cache:'no-store'});
        const j = await res.json();
        ethPrice = Number(j?.ethereum?.usd || 0);
        if(ethPrice>0){ if(ethUsd) ethUsd.textContent = '$'+ethPrice.toLocaleString(); if(ethPriceWarn) ethPriceWarn.classList.add('hidden'); calc(); }
        else{ throw new Error('No price'); }
      }catch(e){ if(ethUsd) ethUsd.textContent = 'unavailable'; if(ethPriceWarn) ethPriceWarn.classList.remove('hidden'); ethPrice = null; calc(); }
    }
    fetchEthPrice(); setInterval(fetchEthPrice, 60_000);

    // Rounds & progress
    const sold = {
      seed:    parseInt(localStorage.getItem('sold_seed')||'0',10),
      private: parseInt(localStorage.getItem('sold_private')||'0',10),
      public:  parseInt(localStorage.getItem('sold_public')||'0',10)
    };

    function getCurrentRound(){
      const now = new Date();
      return ROUNDS.find(r=> now>=r.start && now<=r.end) || null;
    }

    function fmtUSD(n){ return '$'+Number(n).toLocaleString(undefined,{maximumFractionDigits:3}); }

    function refreshPhase(){
      currentRound = getCurrentRound();
      let msg='';
      if(currentRound){
        const pct = Math.max(0, Math.min(100, (sold[currentRound.key]/currentRound.supply)*100));
        if(phaseNameEl) phaseNameEl.textContent = currentRound.name;
        if(phasePriceEl) phasePriceEl.textContent = fmtUSD(currentRound.price);
        if(phaseSupplyEl) phaseSupplyEl.textContent = Number(currentRound.supply).toLocaleString();
        if(progressBar) progressBar.style.width = pct.toFixed(2)+'%';
        if(progressStat) progressStat.textContent = pct.toFixed(2)+'%';
        if(buyPhaseEl) buyPhaseEl.textContent = currentRound.name;
        msg = currentRound.name+' is LIVE.';
        if(buyBtn) buyBtn.disabled=false;
      } else {
        if(phaseNameEl) phaseNameEl.textContent = '‚Äî';
        if(phasePriceEl) phasePriceEl.textContent = '‚Äî';
        if(phaseSupplyEl) phaseSupplyEl.textContent = '‚Äî';
        if(progressBar) progressBar.style.width = '0%';
        if(progressStat) progressStat.textContent = '0%';
        if(buyPhaseEl) buyPhaseEl.textContent = '‚Äî';
        const now = new Date();
        const next = ROUNDS.find(r=> now<r.start);
        if(next){ msg = next.name+' opens on '+ dateStr(next.start) +'.'; if(buyBtn) buyBtn.disabled=true; }
        else { msg = 'Sales have ended.'; if(buyBtn) buyBtn.disabled=true; }
      }
      if(saleStatus) saleStatus.textContent = msg;
      if(saleStatusBuy) saleStatusBuy.textContent = msg;
      calc();
    }
    refreshPhase(); setInterval(refreshPhase, 1000);

    // Inputs
    if(usdInput) usdInput.addEventListener('input', calc);
    if(payTokenSel) payTokenSel.addEventListener('change', ()=>{
      const v = payTokenSel.value;
      if(v==='ETH'){ if(ethCalcBox) ethCalcBox.classList.remove('hidden'); if(usdtCalcBox) usdtCalcBox.classList.add('hidden'); }
      else { if(usdtCalcBox) usdtCalcBox.classList.remove('hidden'); if(ethCalcBox) ethCalcBox.classList.add('hidden'); }
      calc();
    });

    function calc(){
      const usd = Number(usdInput?.value||0);
      const price = currentRound? currentRound.price : 0.003; // default
      const tokens = Math.floor(usd / price);
      if(tokensOut) tokensOut.value = isFinite(tokens)? tokens.toLocaleString() : '0';
      if(payTokenSel?.value==='ETH'){
        const need = (ethPrice? usd/ethPrice : 0);
        if(ethNeeded) ethNeeded.value = ethPrice? precise(need, 6) : 'n/a';
      } else if(usdtNeeded) { usdtNeeded.value = precise(usd, 2); }
    }

    // Buy
    if(buyBtn) buyBtn.addEventListener('click', async ()=>{
      try{
        if(!currentRound) throw new Error('No active sale phase.');
        const usd = Number(usdInput.value||0);
        if(!usd || usd<1) throw new Error('Enter a USD amount (‚â• 1).');
        if(!signer) { if(announced.length>0) openConnectModal(); else await connectWithProvider(); }
        if(!signer) throw new Error('Wallet not connected.');

        const pay = payTokenSel.value; let txHash=null;
        if(pay==='ETH'){
          if(!ethPrice) throw new Error('ETH price unavailable ‚Äî try USDT or refresh.');
          const ethAmt = usd/ethPrice; const wei = ethers.utils.parseEther(String(precise(ethAmt,6)));
          const tx = await signer.sendTransaction({ to: RECEIVING_ADDRESS, value: wei });
          txMsg.innerHTML = `Waiting for confirmation‚Ä¶ <a target="_blank" href="https://etherscan.io/tx/${tx.hash}">view on Etherscan</a>`; await tx.wait(); txHash=tx.hash;
        } else {
          const usdt = new ethers.Contract(USDT_ADDRESS, ['function transfer(address to, uint256 value) public returns (bool)'], signer);
          const amt = ethers.BigNumber.from(Math.round(usd*(10**USDT_DECIMALS)).toString());
          const tx = await usdt.transfer(RECEIVING_ADDRESS, amt);
          txMsg.innerHTML = `Waiting for confirmation‚Ä¶ <a target="_blank" href="https://etherscan.io/tx/${tx.hash}">view on Etherscan</a>`; await tx.wait(); txHash=tx.hash;
        }

        // update local progress for this phase
        const tokens = Math.floor(usd / currentRound.price);
        sold[currentRound.key] += tokens;
        localStorage.setItem('sold_'+currentRound.key, String(sold[currentRound.key]));
        refreshPhase();

        txMsg.innerHTML = `Success! Purchase recorded. <a target="_blank" href="https://etherscan.io/address/${RECEIVING_ADDRESS}">Project wallet</a> ‚Ä¢ <a target="_blank" href="https://etherscan.io/tx/${txHash}">Your tx</a>`;
      }catch(e){ note(e.message||String(e)); }
    });

    function note(msg){ const el=document.getElementById('txMsg'); if(el) el.textContent = msg; }
    function precise(n, dp){ const m=Math.pow(10,dp||6); return Math.round(n*m)/m; }
    function short(addr){ return addr? addr.slice(0,6)+'‚Ä¶'+addr.slice(-4) : ''; }
    function dateStr(d){ return d.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'}); }
  })();
  </script>
</body>
</html>
